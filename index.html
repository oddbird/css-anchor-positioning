<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CSS Anchor Positioning Polyfill Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/open-props" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/prismjs@v1.x/themes/prism.css"
    />
    <script
      src="https://unpkg.com/@oddbird/popover-polyfill@latest/dist/popover.min.js"
      crossorigin="anonymous"
      defer
    ></script>
    <link rel="stylesheet" href="/demo.css" />
    <link rel="stylesheet" href="/anchor.css" />
    <link rel="stylesheet" href="/anchor-positioning.css" />
    <link rel="stylesheet" href="/anchor-popover.css" />
    <link rel="stylesheet" href="/position-anchor.css" />
    <link rel="stylesheet" href="/position-fallback.css" />
    <link rel="stylesheet" href="/anchor-scroll.css" />
    <link rel="stylesheet" href="/anchor-size.css" />
    <link rel="stylesheet" href="/anchor-math.css" />
    <link rel="stylesheet" href="/anchor-name-custom-prop.css" />
    <link rel="stylesheet" href="/anchor-name-list.css" />
    <link rel="stylesheet" href="/anchor-custom-props.css" />
    <link rel="stylesheet" href="/anchor-duplicate-custom-props.css" />
    <link rel="stylesheet" href="/anchor-implicit.css" />
    <link rel="stylesheet" href="/anchor-update.css" />
    <link rel="stylesheet" href="/anchor-absolute.css" />
    <link rel="stylesheet" href="/anchor-added.css" />
    <style>
      #my-anchor-style-tag {
        anchor-name: --my-anchor-style-tag;
      }

      #my-target-style-tag {
        position: absolute;
        bottom: anchor(--my-anchor-style-tag start);
        right: anchor(--my-anchor-style-tag left);
      }
    </style>
    <script type="module">
      import { polyfill, restore } from '/src/index-fn.ts';

      const btn = document.getElementById('apply-polyfill');
      let applied = false;
      window.polyfill = polyfill;
      window.restore = restore;

      if (!('anchorName' in document.documentElement.style)) {
        btn.addEventListener('click', () => {
          btn.setAttribute('disabled', '');
          if (applied) {
            restore().then(() => {
              applied = false;
              btn.innerText = 'Apply Polyfill';
              btn.removeAttribute('disabled');
            });
          } else {
            polyfill().then((rules) => {
              console.log(rules);
              applied = true;
              btn.innerText = 'Unapply Polyfill';
              btn.removeAttribute('disabled');
            });
          }
        });
      } else {
        btn.innerText = 'No Polyfill Needed';
        btn.setAttribute('disabled', '');
        console.log(
          'anchor-positioning is supported in this browser; polyfill skipped.',
        );
      }
    </script>
    <script src="https://unpkg.com/prismjs@v1.x/components/prism-core.min.js"></script>
    <script src="https://unpkg.com/prismjs@v1.x/plugins/autoloader/prism-autoloader.min.js"></script>
  </head>
  <body>
    <header>
      <h1>CSS Anchor Positioning Polyfill</h1>
      <nav>
        <span> See also: </span>
        <a
          href="https://github.com/web-platform-tests/wpt/tree/master/css/css-anchor-position"
          target="_blank"
          rel="noopener noreferrer"
          >WPT examples</a
        >
        <!-- <a
          href="https://anchor-position-wpt.netlify.app/"
          target="_blank"
          rel="noopener noreferrer"
          >WPT results</a
        > -->
        <a
          href="https://w3c.github.io/csswg-drafts/css-anchor-position/"
          target="_blank"
          rel="noopener noreferrer"
          >Draft Spec</a
        >
      </nav>
      <button id="apply-polyfill" data-button="apply-polyfill" type="button">
        Apply Polyfill
      </button>
    </header>
    <section>
      <h2>Anchoring Elements Using CSS</h2>
      <p>
        The CSS anchor positioning
        <a
          href="https://w3c.github.io/csswg-drafts/css-anchor-position/"
          target="_blank"
          rel="noopener noreferrer"
          >specification</a
        >
        defines anchor positioning, "where a positioned element can size and
        position itself relative to one or more 'anchor elements' elsewhere on
        the page." This CSS Anchor Positioning Polyfill supports and is based on
        this specification.
      </p>
      <p>
        The proposed <code>anchor()</code> and
        <code>anchor-size()</code> functions add flexibility to how absolutely
        positioned elements can be placed within a layout. Instead of being
        sized and positioned based solely on the position of their containing
        block, the proposed new functions allow absolutely positioned elements
        to be placed relative to one or more author-defined anchor elements.
      </p>
      <ul>
        <li>
          View the polyfill on
          <a
            href="https://github.com/oddbird/css-anchor-positioning"
            target="_blank"
            rel="noopener noreferrer"
            >GitHub</a
          >
          or browse
          <a
            href="https://github.com/oddbird/css-anchor-positioning/issues"
            target="_blank"
            rel="noopener noreferrer"
            >open issues</a
          >.
        </li>
        <li>
          Find the polyfill on
          <a
            href="https://www.npmjs.com/package/@oddbird/css-anchor-positioning"
            target="_blank"
            rel="noopener noreferrer"
            >npm</a
          >.
        </li>
        <li>
          Browse or open issues related to the specification
          <a
            href="https://github.com/w3c/csswg-drafts/labels/css-anchor-1"
            target="_blank"
            rel="noopener noreferrer"
            >here</a
          >
          or
          <a
            href="https://github.com/tabatkins/specs/issues?q=is%3Aissue+is%3Aopen+%5Bcss-anchor-position%5D"
            target="_blank"
            rel="noopener noreferrer"
            >here</a
          >.
        </li>
      </ul>
      <p>
        <strong>Note: </strong>This polyfill was implemented against an early
        version of the spec, and updates were paused to allow the syntax to
        solidify. Now that browsers are working on implementation, we would like
        to bring it up to date, and welcome
        <a
          href="https://github.com/oddbird/css-anchor-positioning"
          target="_blank"
          rel="noopener noreferrer"
          >code contributions</a
        >
        and <a href="#sponsor">financial support</a> to make that happen.
      </p>
    </section>
    <section id="anchor-positioning" class="demo-item">
      <h2>
        <a href="#anchor-positioning" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [stylesheet]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-target-positioning" class="target">Target</div>
        <div id="my-anchor-positioning" class="anchor">Anchor</div>
      </div>
      <p class="note">
        With polyfill applied: Target and Anchor's right edges line up. Target's
        top edge lines up with the bottom edge of the Anchor.
      </p>
      <pre><code class="language-css"
>#my-anchor-positioning {
  anchor-name: --my-anchor-positioning;
}

#my-target-positioning {
  position: absolute;
  top: anchor(--my-anchor-positioning bottom);
  right: anchor(--my-anchor-positioning right, 50px);
}</code></pre>
    </section>
    <section id="anchor-style-tag" class="demo-item">
      <h2>
        <a href="#anchor-style-tag" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [&lt;style&gt; tag]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-target-style-tag" class="target">Target</div>
        <div id="my-anchor-style-tag" class="anchor">Anchor</div>
      </div>
      <p class="note">
        With polyfill applied: Target is positioned at the top left corner of
        the Anchor.
      </p>
      <pre><code class="language-css"
>/* a &lt;style&gt; tag */

#my-anchor-style-tag {
  anchor-name: --my-anchor-style-tag;
}

#my-target-style-tag {
  position: absolute;
  bottom: anchor(--my-anchor-style-tag start);
  right: anchor(--my-anchor-style-tag left);
}</code></pre>
    </section>
    <section id="anchor-inline" class="demo-item">
      <h2>
        <a href="#anchor-inline" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [inline styles]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div
          id="my-target-inline"
          class="target"
          style="
            position: absolute;
            top: anchor(--my-anchor-in-line bottom);
            right: anchor(--my-anchor-in-line right);
          "
        >
          Target
        </div>
        <div
          id="my-anchor-inline"
          class="anchor"
          style="anchor-name: --my-anchor-in-line"
        >
          Anchor
        </div>
      </div>
      <p class="note">
        With polyfill applied: Target and Anchor's right edges line up. Target's
        top edge lines up with the bottom edge of the Anchor.
      </p>
      <pre><code class="language-css"
>/* inline &lt;style&gt; attributes */

/* anchor */

  style="anchor-name: --my-anchor-in-line"

/* target */

  style="
    position: absolute;
    top: anchor(--my-anchor-in-line bottom);
    right: anchor(--my-anchor-in-line right);
  "</code></pre>
    </section>
    <section id="implicit-name" class="demo-item">
      <h2>
        <a href="#implicit-name" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [implicit
        <code>anchor</code> attribute]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-implicit-anchor" class="anchor">Anchor</div>
        <div id="my-implicit-target" class="target" anchor="my-implicit-anchor">
          Target
        </div>
      </div>
      <p class="note">
        With polyfill applied: Target is positioned at the top left corner of
        the Anchor.
      </p>
      <pre><code class="language-html"
>&lt;div id="my-implicit-anchor"&gt;Anchor&lt;/div&gt;
&lt;div id="my-implicit-target" anchor="my-implicit-anchor"&gt;Target&lt;/div&gt;</code>

<code class="language-css"
>#my-implicit-target {
  position: absolute;
  right: anchor(implicit left);
  bottom: anchor(top);
}</code></pre>
    </section>
    <section id="position-anchor" class="demo-item">
      <h2>
        <a href="#position-anchor" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [
        <code>position-anchor</code> property]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-position-anchor-a" class="anchor">Anchor A</div>
        <div id="my-position-target-a" class="target">Target A</div>
        <div id="my-position-anchor-b" class="anchor">Anchor B</div>
        <div id="my-position-target-b" class="target">Target B</div>
      </div>
      <p class="note">
        With polyfill applied: Targets are positioned at the top right corner of
        their respective Anchors.
      </p>
      <pre><code class="language-html"
>&lt;div id="my-position-anchor-a" class="anchor"&gt;Anchor A&lt;/div&gt;
&lt;div id="my-position-target-a" class="target"&gt;Target A&lt;/div&gt;
&lt;div id="my-position-anchor-b" class="anchor"&gt;Anchor B&lt;/div&gt;
&lt;div id="my-position-target-b" class="target"&gt;Target B&lt;/div&gt;</code>

<code class="language-css"
>#my-position-target-a {
  position-anchor: --my-position-anchor-a;
}

#my-position-target-b {
  position-anchor: --my-position-anchor-b;
}

.target {
  position: absolute;
  bottom: anchor(top);
  left: anchor(right);
}

#my-position-anchor-a {
  anchor-name: --my-position-anchor-a;
}

#my-position-anchor-b {
  anchor-name: --my-position-anchor-b;
}</code></pre>
    </section>
    <section id="anchor-positioning-popover" class="demo-item">
      <h2>
        <a href="#anchor-positioning-popover" aria-hidden="true">ðŸ”—</a>
        Anchoring a <code>popover</code>
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-target-popover" class="target" popover="auto">
          Popover (Target)
        </div>
        <button
          id="my-anchor-popover"
          class="anchor"
          popovertarget="my-target-popover"
        >
          Anchor (click to open)
        </button>
      </div>
      <p class="note">
        With polyfill applied: Target is positioned at the bottom right corner
        of the Anchor.
      </p>
      <pre><code class="language-css"
>#my-anchor-popover {
  position: absolute;
  left: 200px;
  anchor-name: --my-anchor-popover;
}

#my-target-popover {
  position: absolute;
  left: anchor(--my-anchor-popover right);
  top: anchor(--my-anchor-popover bottom);
}</code></pre>
    </section>
    <section id="custom-prop-name" class="demo-item">
      <h2>
        <a href="#custom-prop-name" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [anchor name set as CSS custom
        property]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-anchor-name-prop" class="anchor">Anchor</div>
        <div id="my-target-name-prop" class="target">Target</div>
      </div>
      <p class="note">
        With polyfill applied: Target is positioned at the top left corner of
        the Anchor.
      </p>
      <pre><code class="language-css"
>#my-anchor-name-prop {
  anchor-name: --my-anchor-name-prop;
}

#my-target-name-prop {
  --anchor-var: --my-anchor-name-prop;

  position: absolute;
  right: anchor(var(--anchor-var) left);
  bottom: anchor(var(--anchor-var) top);
}</code></pre>
    </section>
    <section id="position-fallback" class="demo-item">
      <h2>
        <a href="#position-fallback" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>@position-fallback</code>
      </h2>
      <div style="position: relative" class="demo-elements">
        <div class="scroll-container">
          <div class="placefiller-above-anchor"></div>
          <div class="placefiller-before-anchor"></div>
          <span id="my-anchor-fallback" class="anchor"
            >@position-fallback Anchor</span
          >
          <div id="my-target-fallback" class="target">Target</div>
          <div class="placefiller-after-anchor"></div>
        </div>
      </div>
      <div class="note">
        <p>
          <strong>Note: </strong>The <code>@position-fallback</code> syntax has
          been replaced in the spec, and will be deprecated in the next version
          of this Polyfill.
        </p>
        <p>
          With polyfill applied, the following positions are attempted in order:
        </p>
        <ol>
          <li>
            Align the bottom, left edge of the target with the top, left edge of
            the anchor.
          </li>
          <li>
            Align the top, left edge of the target with the bottom, left edge of
            the anchor.
          </li>
          <li>
            Align the bottom, right edge of the target with the top, right edge
            of the anchor.
          </li>
          <li>
            Align the top, right edge of the target with the bottom, right edge
            of the anchor, and increase the height and width of the target.
          </li>
        </ol>
      </div>
      <pre><code class="language-css"
>#my-anchor-fallback {
  anchor-name: --my-anchor-fallback;
}

#my-target-fallback {
  position: absolute;
  position-fallback: --fallback1;
}

@position-fallback --fallback1 {
  /* First try to align the bottom, left edge of the target
     with the top, left edge of the anchor. */
  @try {
    bottom: anchor(--my-anchor-fallback top);
    left: anchor(--my-anchor-fallback left);
  }

  /* Next try to align the top, left edge of the target
     with the bottom, left edge of the anchor. */
  @try {
    top: anchor(--my-anchor-fallback bottom);
    left: anchor(--my-anchor-fallback left);
  }

  /* Next try to align the bottom, right edge of the target
     with the top, right edge of the anchor. */
  @try {
    bottom: anchor(--my-anchor-fallback top);
    right: anchor(--my-anchor-fallback right);
  }

  /* Finally, try to align the top, right edge of the target
     with the bottom, right edge of the anchor. */
  @try {
    top: anchor(--my-anchor-fallback bottom);
    right: anchor(--my-anchor-fallback right);
    width: 100px;
    height: 100px;
  }
}</code></pre>
    </section>
    <section id="anchor-scroll" class="demo-item">
      <h2>
        <a href="#anchor-scroll" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [scrolling elements]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div class="scroll-container">
          <div class="placefiller-above-anchor"></div>
          <div class="placefiller-before-anchor"></div>
          <span id="scroll-anchor" class="anchor">Anchor</span>
          <div id="inner-anchored" class="target">Inner-anchored Target</div>
          <div class="placefiller-after-anchor"></div>
        </div>
        <div id="outer-anchored" class="target outer-anchored">
          Outer-anchored Target
        </div>
      </div>
      <p class="note">
        With polyfill applied: The Inner-anchored Target is positioned at the
        top right corner of the Anchor. The Outer-anchored Target is positioned
        at the bottom left corner of the Anchor.
      </p>
      <pre><code class="language-css"
>#scroll-anchor {
  anchor-name: --scroll-anchor;
}

#inner-anchored {
  position: absolute;
  bottom: anchor(--scroll-anchor top);
  left: anchor(--scroll-anchor end);
}

#outer-anchored {
  position: absolute;
  top: anchor(--scroll-anchor bottom);
  right: anchor(--scroll-anchor start);
}</code></pre>
    </section>
    <section id="math-function" class="demo-item">
      <h2>
        <a href="#math-function" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [used in
        <code>calc()</code> function]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-anchor-math" class="anchor">Anchor</div>
        <div id="my-target-math" class="target">Target</div>
      </div>
      <p class="note">
        With polyfill applied: Target's left edge is 50px left of the Anchor's
        right edge). The top edge of the Target is 50px above the bottom edge of
        the Anchor.
      </p>
      <pre><code class="language-css"
>#my-anchor-math {
  anchor-name: --my-anchor-math;
}

#my-target-math {
  --full-math: anchor(--my-anchor-math 100%);
  --full-minus-math: calc(anchor(--my-anchor-math 100%) - 50px);

  position: absolute;
  top: calc(var(--full-math) - 50px);
  left: var(--full-minus-math);
}</code></pre>
    </section>
    <section id="custom-prop" class="demo-item">
      <h2>
        <a href="#custom-prop" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [passed through CSS custom
        property]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-anchor" class="anchor">Anchor</div>
        <div id="my-target" class="target">Target</div>
      </div>
      <p class="note">
        With polyfill applied: Target's top edge is positioned at 50% of the
        height of the Anchor. The right edge of the Target lines up with 100% of
        the width of the Anchor (i.e. the Anchor's right edge).
      </p>
      <pre><code class="language-css"
>#my-anchor {
  anchor-name: --my-anchor;
}

#my-target {
  --center: anchor(--my-anchor 50%);
  --full: anchor(--my-anchor 100%);

  position: absolute;
  top: var(--center);
  right: var(--full);
}</code></pre>
    </section>
    <section id="custom-prop-passthrough" class="demo-item">
      <h2>
        <a href="#custom-prop-passthrough" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [passed through multiple CSS
        custom properties]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-anchor-props" class="anchor">Anchor</div>
        <div id="my-target-props" class="target">Target</div>
      </div>
      <p class="note">
        With polyfill applied: Target's left edge is positioned in Anchor's
        horizontal center. Target's bottom edge is 10% above the bottom edge of
        Anchor.
      </p>
      <pre><code class="language-css"
>#my-anchor-props {
  anchor-name: --my-anchor-props;
}

#my-target-props {
  --half: anchor(--my-anchor-props 50%);
  --quarter: calc(var(--half) / 2);
  --tenth: calc(var(--quarter) / 2.5);

  position: absolute;
  left: var(--half);
  bottom: var(--tenth);
}</code></pre>
    </section>
    <section id="duplicate-custom-props" class="demo-item">
      <h2>
        <a href="#duplicate-custom-props" aria-hidden="true">ðŸ”—</a>
        Positioning with <code>anchor()</code> [with duplicate CSS custom
        properties]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="anchor-duplicate-custom-props" class="anchor">Anchor</div>
        <div id="target-duplicate-custom-props" class="target">Target</div>
      </div>
      <p class="note">
        With polyfill applied: Target's top left corner is positioned in the
        center (vertically and horizontally) of the Anchor.
      </p>
      <pre><code class="language-css"
>#anchor-duplicate-custom-props {
  anchor-name: --anchor-duplicate-custom-props;
}

#target-duplicate-custom-props {
  --center: anchor(--anchor-duplicate-custom-props 50%);

  position: absolute;
  top: var(--center);
  left: var(--center);
}

#other {
  --center: anchor(--anchor-duplicate-custom-props 100%);
}</code></pre>
    </section>
    <section id="anchor-size" class="demo-item">
      <h2>
        <a href="#anchor-size" aria-hidden="true">ðŸ”—</a>
        Sizing with <code>anchor-size()</code>
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-anchor-size" class="anchor">Anchor</div>
        <div id="my-target-size" class="target">Target</div>
      </div>
      <p class="note">
        With polyfill applied: Target has the same width as the Anchor.
      </p>
      <pre><code class="language-css"
>#my-anchor-size {
  anchor-name: --my-anchor;
  width: 5em;
}

#my-target-size {
  width: anchor-size(--my-anchor width);
}</code></pre>
    </section>
    <section id="anchor-update" class="demo-item">
      <h2>
        <a href="#anchor-update" aria-hidden="true">ðŸ”—</a>
        Dynamically updated anchors
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-anchor-update" class="anchor">Anchor</div>
        <div id="my-target-update" class="target">Target</div>
      </div>
      <button id="toggle-anchor-width">Toggle anchor width</button>
      <script>
        document
          .getElementById('toggle-anchor-width')
          .addEventListener('click', () => {
            const updateAnchor = document.getElementById('my-anchor-update');
            if (updateAnchor.getAttribute('data-small')) {
              updateAnchor.setAttribute('data-large', true);
              updateAnchor.removeAttribute('data-small');
            } else {
              updateAnchor.setAttribute('data-small', true);
              updateAnchor.removeAttribute('data-large');
            }
          });
      </script>
      <p class="note">
        With polyfill applied: Target and Anchor's right edges line up. Target's
        top edge lines up with the bottom edge of the Anchor.
        <br />
        <br />
        When Anchor width is changed dynamically, Target position updates
        accordingly.
      </p>
      <pre><code class="language-css"
>#my-anchor-update {
  anchor-name: --my-anchor-update;
}

#my-target-update {
  position: absolute;
  right: anchor(--my-anchor-update right);
  top: anchor(--my-anchor-update bottom);
}</code></pre>
    </section>
    <section id="anchor-name-list" class="demo-item">
      <h2>
        <a href="#anchor-name-list" aria-hidden="true">ðŸ”—</a>
        Use a list of anchor names
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-anchor-name-list" class="anchor">Anchor</div>
        <div id="my-target-name-list-a" class="target">Target A</div>
        <div id="my-target-name-list-b" class="target">Target B</div>
      </div>
      <p class="note">
        With polyfill applied: Target A is positioned at Anchor's top left
        corner. Target B is positioned at Anchor's bottom right corner.
      </p>
      <pre><code class="language-css"
>#my-anchor-name-list {
  anchor-name: --my-anchor-name-a, --my-anchor-name-b;
}

#my-target-name-list-a {
  position: absolute;
  right: anchor(--my-anchor-name-a left);
  bottom: anchor(--my-anchor-name-a top);
}

#my-target-name-list-b {
  position: absolute;
  left: anchor(--my-anchor-name-b right);
  top: anchor(--my-anchor-name-b bottom);
}
</code></pre>
    </section>
    <section id="anchor-absolute" class="demo-item">
      <h2>
        <a href="#anchor-absolute" aria-hidden="true">ðŸ”—</a>
        Absolutely positioned anchor
      </h2>
      <div style="position: relative; height: 150px" class="demo-elements">
        <div id="my-anchor-absolute-one" class="anchor">Anchor one</div>
        <div id="my-target-absolute-one" class="target">Target one</div>
        <div id="my-anchor-absolute-two" class="anchor">Anchor two</div>
        <div id="my-target-absolute-two" class="target">Target two</div>
      </div>
      <p class="note">
        With polyfill applied: Target one is positioned at the bottom right
        corner of Anchor one. Target two is positioned at the bottom right
        corner of Anchor two.
      </p>
      <pre><code class="language-css"
>#my-anchor-absolute-one,
#my-anchor-absolute-two {
  position: absolute;
  anchor-name: --my-anchor-absolute;
}

#my-target-absolute-one,
#my-target-absolute-two {
  position: absolute;
  top: anchor(--my-anchor-absolute bottom);
  left: anchor(--my-anchor-absolute right);
}</code></pre>
    </section>
    <section id="anchor-added" class="demo-item">
      <h2>
        <a href="#anchor-added" aria-hidden="true">ðŸ”—</a>
        Dynamically added anchors
      </h2>
      <div
        style="position: relative"
        class="demo-elements"
        id="my-anchor-added-container"
      >
        <div id="my-anchor-added-original" class="anchor">Original Anchor</div>
        <div id="my-target-added" class="target">Target</div>
      </div>
      <button id="add-anchor">Add anchor</button>
      <script>
        document.getElementById('add-anchor').addEventListener('click', () => {
          const addBtn = document.getElementById('add-anchor');
          let addedAnchor = document.getElementById('my-anchor-added-new');
          if (addedAnchor) {
            addedAnchor.remove();
            addBtn.innerText = 'Add anchor';
            window.polyfill();
          } else {
            addedAnchor = document.createElement('div');
            addedAnchor.id = 'my-anchor-added-new';
            addedAnchor.classList.add('anchor');
            addedAnchor.innerText = 'Added Anchor';
            document
              .getElementById('my-anchor-added-container')
              .prepend(addedAnchor);
            addBtn.innerText = 'Remove anchor';
            window.polyfill();
          }
        });
      </script>
      <p class="note">
        With polyfill applied: Target and original Anchor's right edges line up.
        Target's top edge lines up with the top edge of the original Anchor.
        <br />
        <br />
        When another valid Anchor is added earlier in the DOM order and the
        polyfill is re-applied, Target position updates relative to the added
        Anchor.
      </p>
      <pre><code class="language-css"
>#my-anchor-added-new {
  anchor-name: --my-anchor-added;
  margin-bottom: 1rem;
}

#my-anchor-added-original {
  anchor-name: --my-anchor-added;
}

#my-target-added {
  position: absolute;
  left: anchor(--my-anchor-added right);
  top: anchor(--my-anchor-added top);
}</code></pre>
    </section>
    <section id="sponsor">
      <h2>Sponsor OddBird's OSS Work</h2>
      <p>
        At OddBird, we love contributing to the languages & tools developers
        rely on. We're currently working on polyfills for new Popover & Anchor
        Positioning functionality, as well as CSS specifications for functions,
        mixins, and responsive typography. Help us keep this work sustainable
        and centered on your needs as a developer! We display sponsor logos and
        avatars on our
        <a
          href="https://www.oddbird.net/polyfill/#open-source-sponsors"
          target="_blank"
          rel="noopener noreferrer"
          >website</a
        >.
      </p>
      <a
        href="https://github.com/sponsors/oddbird"
        target="_blank"
        rel="noopener noreferrer"
        >Sponsor OddBird's OSS Work</a
      >
    </section>
    <footer>
      <p>
        Spec proposal by
        <a
          href="http://xanthir.com/contact/"
          target="_blank"
          rel="noopener noreferrer"
          >Tab Atkins-Bittner</a
        >. Polyfill and demo by
        <a
          href="https://www.oddbird.net/"
          target="_blank"
          rel="noopener noreferrer"
          >OddBird</a
        >. Designed using
        <a
          href="https://open-props.style/"
          target="_blank"
          rel="noopener noreferrer"
          >Open Props</a
        >.
      </p>
    </footer>
  </body>
</html>
